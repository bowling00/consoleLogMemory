<html>

<head>
</head>

<body>
    <div style="display: flex;width: 100%;justify-content: space-around;">
        <div>
            <button id="btn1">run</button>
            <div>
                console.log(obj);
            </div>
        </div>
        <div>
            <button id="btn2">run</button>
            <div>
                if (false) {
                    console.log(obj);
                }
            </div>
        </div>
        <div>
            <button id="btn3">run</button>
            <div>
                if (true) {
                    console.log(JSON.parse(JSON.stringify(obj)));
                }
            </div>
        </div>
    </div>

    <div id="box"></div>
    <script>
        const MB = 1024 * 1024;
        const btn1 = document.getElementById('btn1');
        const btn2 = document.getElementById('btn2');
        const btn3 = document.getElementById('btn3');
        const box = document.getElementById('box');
        function log1 () {
            const memory = performance.memory.totalJSHeapSize;
            const usagedMemory = Math.floor(memory / MB);
            box.insertAdjacentHTML('beforeend', `<span>${usagedMemory} </span>`);
            const obj = { usagedMemory, str: 'g'.repeat(50 * MB) };
            console.log(obj);
            setTimeout(() => log1(), 50);
        }
        function log2 () {
            const memory = performance.memory.totalJSHeapSize;
            const usagedMemory = Math.floor(memory / MB);
            box.insertAdjacentHTML('beforeend', `<span>${usagedMemory} </span>`);
            const obj = { usagedMemory, str: 'g'.repeat(50 * MB) };
            if (false) {
                console.log(obj);
            }
            setTimeout(() => log2(), 50);
        }
        function log3 () {
            const memory = performance.memory.totalJSHeapSize;
            const usagedMemory = Math.floor(memory / MB);
            box.insertAdjacentHTML('beforeend', `<span>${usagedMemory} </span>`);
            const obj = { usagedMemory, str: 'g'.repeat(50 * MB) };
            if (true) {
                console.log(JSON.parse(JSON.stringify(obj)));
            }
            setTimeout(() => log3(), 50);
        }
        btn1.addEventListener('click', function () {
            log1();
        });
        btn2.addEventListener('click', function () {
            log2();
        });
        btn3.addEventListener('click', function () {
            log3();
        });
    </script>
</body>

</html>